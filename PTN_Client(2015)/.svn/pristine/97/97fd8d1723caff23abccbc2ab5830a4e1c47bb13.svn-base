package com.nms.ui.ptn.systemconfig.dialog.bsUpdate.contriller;

import java.util.ArrayList;
import java.util.List;

import com.nms.db.bean.equipment.shelf.SiteInst;
import com.nms.model.equipment.shlef.SiteService;
import com.nms.model.util.Services;
import com.nms.ui.frame.AbstractController;
import com.nms.ui.manager.ConstantUtil;
import com.nms.ui.manager.ExceptionManage;
import com.nms.ui.manager.UiUtil;
import com.nms.ui.ptn.systemconfig.dialog.bsUpdate.view.BatchSoftwareUpdateRightPanle;
import com.nms.ui.ptn.systemconfig.dialog.udConfigure.view.UploadDownloadConfigureRightPanle;

public class BatchSoftwareUpdateRightController extends AbstractController{
	
	private BatchSoftwareUpdateRightPanle view;
	public BatchSoftwareUpdateRightController(BatchSoftwareUpdateRightPanle batchSoftwareUpdateRightPanle) {
		view = batchSoftwareUpdateRightPanle;
		try {
			this.refresh();
		} catch (Exception e) {
			ExceptionManage.dispose(e,this.getClass());
		}
	}
	@Override
	public void refresh() throws Exception {

		SiteService siteService = null;
		List<SiteInst> siteInstList = null;
		try {
			siteService = (SiteService) ConstantUtil.serviceFactory.newService(Services.SITE);
			view.getTable().clear();
			siteInstList = new ArrayList<SiteInst>();
			if(view.getIntegers() != null && view.getIntegers().size()>0){
				for(Integer integer : view.getIntegers()){
					SiteInst siteInst = siteService.select(integer);
					siteInstList.add(siteInst);
				}
			}
			view.updateUI();
			this.view.initData(siteInstList);
		} catch (Exception e) {
			ExceptionManage.dispose(e,this.getClass());
		} finally {
			UiUtil.closeService(siteService);
		}
	
	}


}
